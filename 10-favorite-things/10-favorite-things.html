<script>
    // Взрослая версия
    // Перекидываем на конец теста если есть значение
    if (localStorage.getItem("test-end")) {
        location.href = "../testing-end?test-name=10FavoriteThings"
    }
</script>

<script>
    // Меняем название страницы
    document.title = "10 любимых дел"

    // Если нету manager-id В ссылке то перекинет на страницу с просьбой получить актуальную ссылку
    let URLParams = Object.fromEntries(new URLSearchParams(window.location.search))
    // Если в строке нету значения manager-id или он не цифра или значение пустое
    if (!URLParams.hasOwnProperty("manager-id") || isNaN(URLParams["manager-id"]) || URLParams["manager-id"] === "") {
        location.href = "../testing-end?no-manager-id=true"
    }

    // Получем сохраненные данные о тестировании
    let questionsHash = JSON.parse(localStorage.getItem("questionsHash_10FavoriteThings"))
    let isQuestionsHash = questionsHash ? true : false // Была ли информация взята из кэша

    // Если объект = null - делаем его пустым объектом
    if (!isQuestionsHash) {
        questionsHash = {}
    }
</script>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap');

    :root {
        --p-gray: #00000088;
        --p-cian: #66CAA5;
        --h-title: #BD92CE;

        --border: #BD92CE;
        --border-cian: #66CAA6;
        --button: #BD92CE;
        --input-bg: #DEC8E7;
        --input-placeholder: #5E4967;

        --dot-bg: #F1CD21;
    }
    
    body {
        width: 100%;
    }
    
    h2 {
        font-family: 'Roboto', Sans-Serif;
        font-weight: 500;
        font-size: 48px;
        line-height: 134%;
    }
    
    h3 {
        font-family: 'Roboto', Sans-Serif;
        font-weight: 500;
        font-size: 24px;
        line-height: 132%;
    }
    
    p, .p1 {
        font-family: 'Roboto', Sans-Serif;
        font-weight: 400;
        font-size: 20px; /* На этой странице 20 вместо 18 */
        line-height: 21px;
    }

    .p1-strong {
        font-family: 'Roboto';
        font-weight: 500;
        font-size: 18px;
        line-height: 112%;
    }

    .p-gray {
        color: var(--p-gray);
    }

    .p-cut {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .hidden {
        display: none !important;
    }


    /* Стиль для ошибки инпута */
    input.error {
        animation: inputError 2s ease-in;
    }

    /* Анимацция ошибки */
    @keyframes inputError {
        0% {
            border: 1px solid var(--border);
        }

        2% {
            border: 1px solid #F40B0B;
        }

        100% {
            border: 1px solid var(--border);
        }
    }
</style>

<style>
    /* Логотип сверху слево */
    #top-left-logo {
        width: 128px;
        
        position: absolute;
        top: 50px;
        left: 100px;
        
    }
    
    #top-left-logo img {
        width: 100%;
    }
</style>
    
<style>
    article {
        width: min(1440px, 100%); /* Ширина 1440px или 100% при сужении */
        height: 800px;
        display: flex;
        flex-direction: row;
        justify-content: center;
        position: relative;
        
        margin: 0 auto; /* По центру страницы */
    }
    
    
    #form-aside {
        width: 50%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-end;
        gap: 12px;
    }


    #form-aside h3 {
        width: 403px;
        height: 96px;

        margin-right: 126px;
    }

    #form-aside p {
        width: 403px;
        height: 154px;

        font-size: 20px;
        line-height: 112%;

        margin-right: 126px;
    }

    #form-aside h3 span, #form-aside p span {
        color: var(--p-cian);
    }
</style>

<style>
    #form-section {
        width: 50%;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    #form-section form {
        width: 460px;
        box-sizing: border-box;
        padding: 42px 65px;

        display: flex;
        flex-direction: column;
       
        border: 1px solid var(--border);
        border-radius: 10px;

        margin-left: 67px;
    }


    #form-logo {
        width: 100%;
        height: 29px;
        display: flex;
        justify-content: center;

        margin-bottom: 42px;
    }
    
    #form-logo img {
        width: 39px;
        height: 29px;
    }


    form input {
        display: block;
        width: 100%;
        height: 40px;
        box-sizing: border-box;
        padding: 0 12px;

        border: 1px solid var(--border);
        border-radius: 10px;

        margin-top: 4px;
        margin-bottom: 29px;
    }

    #form-error {
        color: #F40B0B;
        margin-bottom: 12px;
        visibility: hidden;
    }

    #form-error.show {
        visibility: visible;
    }

    button {
        width: 100%;
        height: 40px;
        box-sizing: border-box;

        font-size: 18px !important;

        display: flex;
        justify-content: center;
        align-items: center;

        background: var(--button);
        border-radius: 10px;
        border: none;
        outline: none;       
        
        transition: .15s all;
        cursor: pointer;
        color: #000000 !important;
    }
    
    @media (hover: hover) {
        button:hover {
            background: #000000;
            color: #FFFFFF !important;
        }
    }
    
    button:disabled {
        background: #d1aedf;
        color: #313131 !important;
        cursor: not-allowed;
    }
</style>

<style>
    input[type="email"] {
        margin-bottom: 12px;
    }


    /* Обработка персональной информации */
    .form-checkbox {
        display: flex;
        align-items: flex-start;
        gap: 12px;

        margin-bottom: 20px;
    }

    #label-policy {
        width: calc(100% - 12px - 15px);
        font-size: 12px;
        line-height: 112%;
        cursor: pointer;
    }

    #label-policy span {
        font-size: 12px;
        line-height: 112%;
        cursor: pointer;
        display: inline;

        font-weight: 500;
        color: var(--h-title);
    }

    @media (hover: hover) {
        #label-policy span:hover {
            text-decoration: underline;
        }
    }

    @media (hover: none) {
        #label-policy span {
            text-decoration: underline;
        }
    }

    #policy {
        width: 15px;
        height: 15px;
        box-sizing: border-box;
        cursor: pointer;

        border-radius: 3px;
        border: 1px solid var(--border);
        background-color: #ffffff;

    }

    #policy.checked {
        background-color: var(--border);
    }
</style>

<style>
    .article-content {
        height: auto;
        flex-direction: column;
        position: relative;

        box-sizing: border-box;
        padding: 0 80px 70px 80px; /* На 70px снизу меньше так как снизу плашка от тильды */
    }


    #section-content {
        width: 100%;
        /* height: 1520px; */
        height: auto;
        display: flex;
        flex-direction: column;
        align-items: center;

        box-sizing: border-box;
        padding: 80px;

        border-radius: 10px;
        border: 2px solid var(--border-cian);
    }
    /* Заголовок страницы */
    #section-title {
        height: 60px;
        padding-top: 75px;
        padding-bottom: 25px;

        text-transform: uppercase;
        text-align: center;
    }


    /* Контент */
    .section-content {
        width: 100%;
        display: flex;
        gap: 40px;
    }

    .section-content__column {
        width: calc(50% - 20px);
        display: flex;
        flex-direction: column;
        gap: 25px;
    }


    /* Стрелочки */
    #cross-block-arrow1 {
        position: absolute;
        top: -24px;
        right: -102px;
        z-index: 1;
    }

    #cross-block-arrow2 {
        position: absolute;
        bottom: -25px;
        right: -65px;
        z-index: 1;
    }


    .section-content__block {
        width: 100%;
        position: relative;
        display: flex;
        flex-direction: column;
        gap: 20px;

        box-sizing: border-box;
        padding: 40px;

        border-radius: 20px;
    }


    #block-purple {
        /* height: 375px; */
        background: rgb(222,200,231);
        /* background: rgba(189, 146, 206, 0.50); */
    }

    #block-yellow {
        /* height: 284px; */
        background: rgb(248,230,144);
        /* background: rgba(241, 205, 33, 0.50); */
        padding: 20px 40px;
    }

    #block-blue {
        width: calc(50% - 20px);
        /* height: 684px; */
        background: rgb(179,228,210);
        /* background: rgba(102, 202, 165, 0.50); */

        padding-right: 39px;
        padding-bottom: 30px;
        gap: 10px;
    }


    /* Особые стили */
    #block-purple h3:nth-of-type(3) img {
        top: 4px;
    }


    #block-yellow h3:nth-of-type(1) {
        margin-top: 20px;
    }

    #block-yellow h3:nth-of-type(2) {
        margin-top: 34px;
    }

    #block-yellow h3:nth-of-type(2) img {
        top: 4px;
    }

    #block-yellow h3:nth-of-type(3) {
        margin-top: 27px;
    }

    #block-yellow h3:nth-of-type(4) {
        padding: 0;

        text-align: center;
        font-weight: 700;
    }


    #block-blue h3:nth-of-type(2) {
        margin-top: 10px;
    }

    #block-blue h3:nth-of-type(2) img {
        top: 6px;
    }

    #block-blue h3:nth-of-type(3) {
        margin-top: 10px;
    }

    #block-blue h3:nth-of-type(3) img {
        top: 12px;
    }


    /* Блоки с картинкой и текстом */
    .section-content__block h3 {
        width: 100%;
        position: relative;

        box-sizing: border-box;
        padding-left: 48px;


        color: #141212;
        font-size: 16px;
        font-weight: 400;
        line-height: 132%;
    }

    .section-content__block h3 span {
        font-weight: 700;
    }

    .section-content__block h3 img {
        position: absolute;
        top: 0;
        left: 0;
    }


    /* Поля ввода под контентом */
    .section-inputs {
        width: 100%;
        height: 360px;
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        gap: 40px;

        margin-top: 80px;
    }

    .section-inputs__block {
        width: calc(50% - 20px);
        height: 40px;
        position: relative;
    }

    .section-inputs__block h3 {
        position: absolute;
        top: 9px;
        left: 20px;

        font-size: 16px;
    }

    .section-inputs input {
        width: 100%;
        height: 100%;

        box-sizing: border-box;
        padding: 9px 20px 9px 60px;

        border: 2px solid var(--border);
        border-radius: 10px;

        color: #000000;
        font-family: 'Roboto', Sans-Serif;
        font-size: 16px;
        font-style: normal;
        font-weight: 400;
        line-height: 132%;

        margin: 0;
    }


    #button-end, #button-back {
        width: 640px;
        height: 60px;

        border-radius: 20px;

        font-size: 24px !important;
        font-weight: 500;

        margin-top: 80px;
    }

    #button-back {
        margin-top: 34px;
    }
</style>

<style>
    #shape-text {
        width: 100%;
        display: flex;
        gap: 27px;

        margin-top: 20px;
    }

    #shape-text > svg {
        width: 5px;
    }

    .shape-text__column {
        width: calc(50% - 29px);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
    }

    .shape-text__column h3 {
        width: auto;
        margin: 0 !important;
        padding: 0;
    }

    .shape-text__column svg {
        height: 5px;
    }
</style>

<article>
    <div id="top-left-logo">
        <img src="https://static.tildacdn.com/tild6630-3237-4638-a534-313664333931/___.svg" alt="logo">
    </div>
    
    <aside id="form-aside">
        <h3>После заполнения анкеты вам откроется доступ к диагностике<br><span>«10 любимых дел»</span></h3>
        <p>Диагностика поможет узнать, какие виды деятельности вам подходят больше всего.<br>Пожалуйста, внимательно прочитайте инструкцию, прежде чем переходить к самой диагностике. Инструкция будет доступна вам после заполнения данной формы.</p>
    </aside>

    <section id="form-section">
        <form>
            <div id="form-logo">
                <img src="https://sun9-33.userapi.com/impg/o7UasFLuPHffAw7M354dhIyAw-ywr1TdpgWp7w/AU35d9CQutY.jpg?size=192x140&quality=96&sign=65f29d920ee520f801e55492621ceaed&type=album" alt="mini-logo">
            </div>

            <label class="p1" for="form-name">ФИО</label>
            <input class="p1" type="text" id="form-name" name="form-name" maxlength="100" required>

            <label class="p1" for="form-phone">Телефон</label>
            <input class="p1" type="tel" id="form-phone" name="form-phone" maxlength="20" required>

            <label class="p1" for="form-email">Email</label>
            <input class="p1" type="email" id="form-email" name="form-email" maxlength="100" required>

            <p id="form-error">Неверный формат ФИО</p>

            <div class="form-checkbox">
                <div id="policy"></div>
                <label id="label-policy" for="policy" class="p1">Я принимаю условия <span>Пользовательского соглашения</span> и даю свое <span>согласие на обработку персональных данных</span> в соответствии с <span>Политикой</span>.</label>
            </div>
            

            <button class="p1" type="submit" id="submit-form">Далее</button>
        </form>
    </section>


    <!-- Контент диагностики -->
    <h2 id="section-title" class="hidden">«10 любимых дел»</h2>
    <section id="section-content" class="hidden">
        <!-- Две колонны контента -->
        <div class="section-content">
            <!-- Колонна с 2 блоками -->
            <div class="section-content__column">
                <div class="section-content__block" id="block-purple">
                    <div id="cross-block-arrow1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="142" height="71" viewBox="0 0 142 71" fill="none">
                            <path d="M0 68C5.00679e-06 69.3807 1.1193 70.5 2.50001 70.5C3.88072 70.5 5.00001 69.3807 5 68L0 68ZM130.5 67.9999L141.247 41.2073L112.67 45.2968L130.5 67.9999ZM5 68C4.99986 30.3883 30.1629 9.75102 57.8218 6.08933C85.628 2.40813 115.479 15.9112 124.925 46.4726L129.702 44.9961C119.38 11.5996 86.8243 -2.79387 57.1656 1.13257C27.3596 5.07852 -0.000148773 27.553 0 68L5 68Z" fill="#F1CD21"/>
                        </svg>
                    </div>
                    <h3>Это <span>ВАЖНОЕ</span> сообщение<img src="https://sun9-43.userapi.com/impg/Yd2ijlCd0fXQJKrRU3ZMagID9ol3fMvHHYApeg/P2qEVzS19gc.jpg?size=28x28&quality=96&sign=50450a2dd683a43ed4b8f66b323b4c09&type=album" alt="shape"></h3>
                    <h3>поможет вам сделать это ЗАДАНИЕ правильно. Поэтому, пожалуйста, прочитайте этот текст внимательно и следуйте нашим инструкциям.</h3>
                    <h3>До <span>21:00</span> завтрашнего дня я жду от вас 10 пунктов, отвечающих на вопрос:<img src="https://sun9-19.userapi.com/impg/rtJeKVHALsqXKiIF7I9Uoon7lkH0ztE27O1i9A/zjXhlGWZEM4.jpg?size=28x28&quality=96&sign=8e019baefc823fac03da09a2ec846a5a&type=album" alt="shape"></h3>
                    <h3>«Что вы любите делать больше всего?»</h3>
                    <h3>Меньше 10 пунктов не засчитывается за выполнение задания! Поэтому важно заполнить ниже все 10 полей «любимых дел».<img src="https://sun9-71.userapi.com/impg/lyJ51FhntW5ryAYyTWJQxaOLVfLHX89niWN12Q/65t_nQLnvgw.jpg?size=28x29&quality=96&sign=66ff7a29f85f93240cdfd5541878841e&type=album" alt="shape"></h3>
                </div>
                <div class="section-content__block" id="block-yellow">
                    <h3>Важно посидеть и подумать!<img src="https://sun9-69.userapi.com/impg/Ky0RIWZXG9RJizSYAh4O615P6R_i92-qexpwwg/GaYiimdd6Ds.jpg?size=28x28&quality=96&sign=6626e624cf99a74bf6a0d7b13d81a007&type=album" alt="shape"></h3>
                    <h3>Встаньте в позицию <span>СОЗДАТЕЛЯ</span> некоего продукта, а не его потребителя!<img src="https://sun9-73.userapi.com/impg/AB_g-v77EZ-5EprPbvOxXLuFjOWXrNCdGmKWIg/LGJAFjn0KPY.jpg?size=28x27&quality=96&sign=843ab0c096aa73ca3367f926ad8427a8&type=album" alt="shape"></h3>
                    <h3>Впишите свои ответы в формы ниже.<img src="https://sun9-58.userapi.com/impg/TLOzuCBcvXtrYD3NHCeavo-JkyJVJ6HXZ8VOOQ/1B621tSv7yg.jpg?size=34x28&quality=96&sign=12d75971378133e8007b3d373b14e165&type=album" alt="shape"></h3>
                    <h3>УДАЧИ!</h3>
                    <div id="cross-block-arrow2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="142" height="71" viewBox="0 0 142 71" fill="none">
                            <path d="M11 3L28.8942 25.6524L0.329511 29.823L11 3ZM136.5 3.00007C136.5 1.61935 137.619 0.500069 139 0.500069C140.381 0.500069 141.5 1.61935 141.5 3.00007H136.5ZM16.6351 24.5124C26.1599 54.7627 56.0145 68.4684 83.7862 64.9669C97.6328 63.2212 110.801 57.1976 120.493 46.9398C130.16 36.7096 136.5 22.1315 136.5 3.00007H141.5C141.5 23.3081 134.738 39.1447 124.128 50.3737C113.544 61.5752 99.2612 68.0555 84.4117 69.9277C54.7912 73.6622 22.271 59.06 11.866 26.0141L16.6351 24.5124Z" fill="#BD92CE"/>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Колонна с 1 блоком -->
            <div class="section-content__block" id="block-blue">
                <h3>При этом <span>ДЕЛАТЬ = СОЗДАВАТЬ</span>, а НЕ ПОТРЕБЛЯТЬ.</h3>
                <h3>Поэтому ниже пример<br>КАК правильно<br>КАК неправильно<br>можно записать 10 «любимых дел»:<img src="https://sun9-69.userapi.com/impg/uGPZv4SwKgc1k1zVWrH_dVAQIRmSuewehi7pBg/82aoFfjGSSU.jpg?size=28x28&quality=96&sign=674a9af22bd587f3279271197e322d22&type=album" alt="shape"></h3>
                <div id="shape-text">
                    <div class="shape-text__column">
                        <h3>Правильно</h3>
                        <svg xmlns="http://www.w3.org/2000/svg" width="150" height="6" viewBox="0 0 150 6" fill="none">
                            <path d="M147 3L3.00001 3" stroke="#F1CD21" stroke-width="5" stroke-linecap="round"/>
                        </svg>
                        <h3>печь тортики<br>снимать видосики<br>писать книги</h3>
                    </div>

                    <svg xmlns="http://www.w3.org/2000/svg" width="6" height="150" viewBox="0 0 6 150" fill="none">
                        <path d="M3 3L3 147" stroke="#F1CD21" stroke-width="5" stroke-linecap="round"/>
                    </svg>

                    <div class="shape-text__column">
                        <h3>Неправильно</h3>
                        <svg xmlns="http://www.w3.org/2000/svg" width="150" height="6" viewBox="0 0 150 6" fill="none">
                            <path d="M147 3L3.00001 3" stroke="#F1CD21" stroke-width="5" stroke-linecap="round"/>
                        </svg>
                        <h3>кушать тортики<br>смотреть видосики<br>читать книги</h3>
                    </div>
                </div>
                <h3>Просим вас сделать акцент на созидательных делах (где вы НЕ потребитель, а создатель чего-то).<br>Потому что чтобы, например, стать классным бариста, надо любить <span>ГОТОВИТЬ</span> кофе, а не пить.<img src="https://sun9-38.userapi.com/impg/ySX5OH15h75Jx3HSqGA33Iyv_VfljcPT6PcH6A/3DI2bAgEozA.jpg?size=28x29&quality=96&sign=ce7015acfda66ea723de6ff153959ec7&type=album" alt="shape"></h3>
                <h3>Люблю читать книги, есть, слушать музыку,<br>смотреть кино - это первое, что приходит на ум при ответе на вопрос «что я люблю делать». Это естественно!</h3>
                <h3>Но это не подходит для выбора профессии! И не засчитывается за выполнение задания:)</h3>
                <h3>Ваша задача прислать 10 пунктов того, что вы любите <span>СОЗДАВАТЬ</span> и делать <span>ПОЛЕЗНОГО</span> для других. Того, что может стать основой профессии.</h3>
            </div>
        </div>

        <!-- Инпуты после блока -->
        <div class="section-inputs">
            <div class="section-inputs__block">
                <h3>1.</h3>
                <input type="text" id="input-1" maxlength="100">
            </div>
            <div class="section-inputs__block">
                <h3>2.</h3>
                <input type="text" id="input-2" maxlength="100">
            </div>
            <div class="section-inputs__block">
                <h3>3.</h3>
                <input type="text" id="input-3" maxlength="100">
            </div>
            <div class="section-inputs__block">
                <h3>4.</h3>
                <input type="text" id="input-4" maxlength="100">
            </div>
            <div class="section-inputs__block">
                <h3>5.</h3>
                <input type="text" id="input-5" maxlength="100">
            </div>
            <div class="section-inputs__block">
                <h3>6.</h3>
                <input type="text" id="input-6" maxlength="100">
            </div>
            <div class="section-inputs__block">
                <h3>7.</h3>
                <input type="text" id="input-7" maxlength="100">
            </div>
            <div class="section-inputs__block">
                <h3>8.</h3>
                <input type="text" id="input-8" maxlength="100">
            </div>
            <div class="section-inputs__block">
                <h3>9.</h3>
                <input type="text" id="input-9" maxlength="100">
            </div>
            <div class="section-inputs__block">
                <h3>10.</h3>
                <input type="text" id="input-10" maxlength="100">
            </div>
        </div>

        <!-- Кнопка в конце -->
        <button id="button-end" disabled>Отправить</button>
        <button id="button-back">Назад</button>
    </section>
</article>

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
    // Пометить инпут ошибкой
    function inputError(selector) {
        // Если у инпута нету класса ошибки - добавляем и через 2 секунды удаляем
        if (!$(selector).hasClass("error")) {
            $(selector).addClass("error")
            setTimeout(() => {$(selector).removeClass("error")}, 2000)
        }
    }


    // Если пользователь валидно заполнил форму и данные сохранились в хэш, то заполняем поля
    let hashUserFormData = JSON.parse(localStorage.getItem("userFormData"))
    if (hashUserFormData) {
        $("#form-name").val(hashUserFormData.formName)
        $("#form-phone").val(hashUserFormData.formPhone)
        $("#form-email").val(hashUserFormData.formEmail)
        // Галочка 
        $("#policy").toggleClass("checked")
    }


    $("#form-name").change(() => { // Удаление лишних пробелов
        $("#form-name").val($("#form-name").val().replace(/ +/g, ' ').trim())
    })

    $("#form-phone").change(() => { // Удаление пробелов
        $("#form-phone").val($("#form-phone").val().replace(/ /g,''))
    })

    $("#form-email").change(() => { // Удаление пробелов
        $("#form-email").val($("#form-email").val().replace(/ /g,''))
    })


    // Галочка 
    $("#policy").on("click tap", () => {
        $("#policy").toggleClass("checked")
    })

    // Клик тексту после галочки
    $("#label-policy").on("click tap", () => {
        $("#policy").addClass("checked")
    })

    // Клик по политике
    $("#label-policy span").on("click tap", () => {
        window.open("../policy", "_blank")
    })


    // Ивент submit у формы входа
    const form = document.querySelector('form')
    form.addEventListener('submit', (event) => {
        // Отключение базового перехода
        event.preventDefault()

        // Отключаем кнопку на 2 секунды
        $("#submit-form").attr("disabled", "disabled")
        setTimeout(() => {
            $("#submit-form").removeAttr("disabled")
        }, 2000)


        // Получаем поля из фомы
        const formData = new FormData(form)
        const formName = formData.get("form-name")
        const formPhone = formData.get("form-phone")
        const formEmail = formData.get("form-email")
        
        // В поле ФИО должно быть ровно 3 слова
        if (formName.split(" ").length !== 3) {
            inputError("#form-name")

            // Ставим текст ошибки
            $("#form-error").text("Неверный формат ФИО")
            $("#form-error").addClass("show")
            setTimeout(() => {
                $("#form-error").removeClass("show")
            }, 2000)
            return
        }

        // Проверка поля Телефона на регулрном выражении
        let rePhone = /^[\d\+][\d\(\)\ -]{9,14}\d$/
        if (!rePhone.test(formPhone)) {
            inputError("#form-phone")
            // Ставим текст ошибки
            $("#form-error").text("Неверный номер телефона")
            $("#form-error").addClass("show")
            setTimeout(() => {
                $("#form-error").removeClass("show")
            }, 2000)
            return
        }

        // Проверка поля Почты на регулрном выражении
        let reEmail = /^[\w-\.]+@[\w-]+\.[a-z]{2,4}$/i
        if (!reEmail.test(formEmail)) {
            inputError("#form-email")
            // Ставим текст ошибки
            $("#form-error").text("Неверный email")
            $("#form-error").addClass("show")
            setTimeout(() => {
                $("#form-error").removeClass("show")
            }, 2000)
            return
        }

        if (!$("#policy").hasClass("checked")) {
            // Ставим текст ошибки
            $("#form-error").text("Отметьте поле")
            $("#form-error").addClass("show")
            setTimeout(() => {
                $("#form-error").removeClass("show")
            }, 2000)
            return
        }


        $("#form-aside").addClass("hidden")
        $("#form-section").addClass("hidden")
        $("#section-title").removeClass("hidden")
        $("#section-content").removeClass("hidden")

        // Класс для корректного отображения
        $("article").addClass("article-content")



        // Сохраняем информацию в хэш
        let userFormData = {
            formName: formName,
            formPhone: formPhone,
            formEmail: formEmail,
        }

        localStorage.setItem("userFormData", JSON.stringify(userFormData))

        // Когда заполнили все поля и нажали "Далее", то рендерит Правила
    })
</script>

<script>
    // Вернуться обратно в форму
    $("#button-back").on("click tap", () => {
        $("#form-aside").removeClass("hidden")
        $("#form-section").removeClass("hidden")
        $("#section-title").addClass("hidden")
        $("#section-content").addClass("hidden")

        // Класс для корректного отображения
        $("article").removeClass("article-content")
    })


    // Автозаполнение полей с ответами
    if (isQuestionsHash) {
        for (inputId in questionsHash) {
            $("#" + inputId).val(questionsHash[inputId])
        }
    }


    // Сохранение ответов
    $(".section-inputs__block input").on("input", (event) => {
        let inputId = event.currentTarget.id
        questionsHash[inputId] = $("#" + inputId).val()

        // Сохраняем ответы после записи
        localStorage.setItem("questionsHash_10FavoriteThings", JSON.stringify(questionsHash))


        // Если всего ответов 10
        if (Object.keys(questionsHash).length === 10) {
            // Если нету пустых ответов
            if (!Object.values(questionsHash).includes("")) {
                $("#button-end").removeAttr("disabled")
            } else {
                // Если есть, то ставим кнопку неактивной
                $("#button-end").attr("disabled", "disabled")
            }
        }
    })

    $(".section-inputs__block input").change((event) => {
        $("#" + event.currentTarget.id).val($("#" + event.currentTarget.id).val().replace(/ +/g, ' ').trim())
    })

    // Триггерим инпуты, что бы при заполненых ответах кнопка разблокировалась
    $(".section-inputs__block input").trigger("input")


    // Отправка ответов
    $("#button-end").on("click tap", () => {
        $("#button-end").attr("disabled", "disabled")
        setTimeout(() => {
            $("#button-end").removeAttr("disabled")
        }, 5000)

        // Проверка, если не все поля заполнены
        if (Object.values(questionsHash).includes("")) {
           return
        }

        // Получаем информацию о пользователе
        let userFormData = JSON.parse(localStorage.getItem("userFormData"))
        
        // Массив который отправиться
        let sendData = {
        // id: Установиться в google scripts
            "manager_id": parseInt(URLParams["manager-id"]),
            "name": userFormData.formName,
            "phone": userFormData.formPhone,
            "email": userFormData.formEmail,
            "new": true,
            "result": {
                "diagnostic-id": 2, // Для этой диагностики id = 2 (Взрослая версия)
                "data": questionsHash,
                "date": Date.now() // Дата текущего прохождения
            },
            "in_archive": false,
            "date": Date.now() // Дата последней активности
        }
        
        // Api запрос в таблицу с результатами
        function DBsendResults(data, func) {
            $.ajax({
                url: "https://planb-service.ru/api/v1/client/result",
                method: "POST",
                data: JSON.stringify(data),
                success: func
            })
        }

        DBsendResults(sendData, (data) => {
            // Информация отправляется и перекидывает на конец тестирования

            // Добавляем значение в хэш что бы после перезагрузки перекинуло на концовку
            localStorage.setItem("test-end", "test-end")
            location.reload()
        })
    })
</script>

<script>
    $( document ).ready(() => {
        $( window ).on( "resize", function() {
            let width = document.body.clientWidth

            if (width <= 984) {
                $("#block-purple").after($("#block-blue"))
            } else {
                $(".section-content__column").after($("#block-blue"))
            }
        })

        let width = document.body.clientWidth

        if (width <= 984) {
            $("#block-purple").after($("#block-blue"))
        } else {
            $(".section-content__column").after($("#block-blue"))
        }
    })
</script>