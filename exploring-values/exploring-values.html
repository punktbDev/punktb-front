<script>
    // Перекидываем на конец теста если есть значение
    if (localStorage.getItem("test-end")) {
        location.href = "../testing-end?test-name=exploringValues"
    }
</script>

<script>
    // Меняем название страницы
    document.title = "Исследование ценностей"

    // Если нету manager-id В ссылке то перекинет на страницу с просьбой получить актуальную ссылку
    let URLParams = Object.fromEntries(new URLSearchParams(window.location.search))
    // Если в строке нету значения manager-id или он не цифра или значение пустое
    if (!URLParams.hasOwnProperty("manager-id") || isNaN(URLParams["manager-id"]) || URLParams["manager-id"] === "") {
        location.href = "../testing-end?no-manager-id=true"
    }

    // Получем сохраненные данные о тестировании
    let questionsHash = JSON.parse(localStorage.getItem("questionsHash_exploringValues"))
    let isQuestionsHash = questionsHash ? true : false // Была ли информация взята из кэша

    // Если информации есть - то записываем
    if (isQuestionsHash) {
        questions = questionsHash
    }
</script>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

    :root {
        --p-gray: #00000088;
        --p-cian: #66CAA5;
        --h-title: #BD92CE;

        --border: #BD92CE;
        --border-cian: #66CAA6;
        --button: #BD92CE;
        --input-bg: #DEC8E7;
        --input-placeholder: #5E4967;

        --dot-bg: #F1CD21;


        --progress-width: 100%;
    }
    
    body {
        width: 100%;
    }
    
    h2 {
        font-family: 'Roboto', Sans-Serif;
        font-weight: 500;
        font-size: 48px;
        line-height: 134%;
    }
    
    h3 {
        font-family: 'Roboto', Sans-Serif;
        font-weight: 500;
        font-size: 24px;
        line-height: 132%;
    }
    
    p, .p1 {
        font-family: 'Roboto', Sans-Serif;
        font-weight: 400;
        font-size: 20px; /* На этой странице 20 вместо 18 */
        line-height: 21px;
    }

    .p1-strong {
        font-family: 'Roboto';
        font-weight: 500;
        font-size: 18px;
        line-height: 112%;
    }

    .p-gray {
        color: var(--p-gray);
    }

    .p-cut {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .hidden {
        display: none !important;
    }


    /* Стиль для ошибки инпута */
    input.error {
        animation: inputError 2s ease-in;
    }

    /* Анимацция ошибки */
    @keyframes inputError {
        0% {
            border: 1px solid var(--border);
        }

        2% {
            border: 1px solid #F40B0B;
        }

        100% {
            border: 1px solid var(--border);
        }
    }
</style>

<style>
    /* Логотип сверху слево */
    #top-left-logo {
        width: 128px;
        
        position: absolute;
        top: 50px;
        left: 100px;
        
    }
    
    #top-left-logo img {
        width: 100%;
    }
</style>
    
<style>
    article {
        width: min(1440px, 100%); /* Ширина 1440px или 100% при сужении */
        height: 800px;
        display: flex;
        flex-direction: row;
        justify-content: center;
        position: relative;
        
        margin: 0 auto; /* По центру страницы */
    }
    
    
    #form-aside {
        width: 50%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-end;
        gap: 12px;
    }


    #form-aside h3 {
        width: 403px;
        height: 96px;

        margin-right: 126px;
    }

    #form-aside p {
        width: 403px;
        height: 154px;

        font-size: 20px;
        line-height: 112%;

        margin-right: 126px;
    }

    #form-aside h3 span, #form-aside p span {
        color: var(--p-cian);
    }
</style>

<style>
    #form-section {
        width: 50%;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    #form-section form {
        width: 460px;
        box-sizing: border-box;
        padding: 42px 65px;

        display: flex;
        flex-direction: column;
       
        border: 1px solid var(--border);
        border-radius: 10px;

        margin-left: 67px;
    }


    #form-logo {
        width: 100%;
        height: 29px;
        display: flex;
        justify-content: center;

        margin-bottom: 42px;
    }
    
    #form-logo img {
        width: 39px;
        height: 29px;
    }


    form input {
        display: block;
        width: 100%;
        height: 40px;
        box-sizing: border-box;
        padding: 0 12px;

        border: 1px solid var(--border);
        border-radius: 10px;

        margin-top: 4px;
        margin-bottom: 29px;
    }

    #form-error {
        color: #F40B0B;
        margin-bottom: 12px;
        visibility: hidden;
    }

    #form-error.show {
        visibility: visible;
    }

    button {
        width: 100%;
        height: 40px;
        box-sizing: border-box;

        font-size: 18px !important;

        display: flex;
        justify-content: center;
        align-items: center;

        background: var(--button);
        border-radius: 10px;
        border: none;
        outline: none;       
        
        transition: .15s all;
        cursor: pointer;
        color: #000000 !important;
    }
    
    @media (hover: hover) {
        button:hover {
            background: #000000;
            color: #FFFFFF !important;
        }
    }
    
    button:disabled {
        background: #d1aedf;
        color: #313131 !important;
        cursor: not-allowed;
    }
</style>

<style>
    input[type="email"] {
        margin-bottom: 12px;
    }


    /* Обработка персональной информации */
    .form-checkbox {
        display: flex;
        align-items: flex-start;
        gap: 12px;

        margin-bottom: 20px;
    }

    #label-policy {
        width: calc(100% - 12px - 15px);
        font-size: 12px;
        line-height: 112%;
        cursor: pointer;
    }

    #label-policy span {
        font-size: 12px;
        line-height: 112%;
        cursor: pointer;
        display: inline;

        font-weight: 500;
        color: var(--h-title);
    }

    @media (hover: hover) {
        #label-policy span:hover {
            text-decoration: underline;
        }
    }

    @media (hover: none) {
        #label-policy span {
            text-decoration: underline;
        }
    }

    #policy {
        width: 15px;
        height: 15px;
        box-sizing: border-box;
        cursor: pointer;

        border-radius: 3px;
        border: 1px solid var(--border);
        background-color: #ffffff;

    }

    #policy.checked {
        background-color: var(--border);
    }
</style>

<style>
    #top-right-figure {
        position: absolute;
        top: 0;
        right: 0;
        
    }

    #bottom-left-figure {
        width: 256px;
        height: 187px;
        position: absolute;
        bottom: 0;
        left: 0;

        overflow: hidden;
    }

    #bottom-left-figure svg {
        position: absolute;
        top: 2px;
        left: 0;
    }

    #center-left-figure {
        position: absolute;
        top: 86px;
        left: 0;

        z-index: -1;
    }

    .article-content {
        width: 100%;
        height: auto;
        flex-direction: column;
        align-items: center;
        position: relative;

        box-sizing: border-box;
        padding: 0 0 70px 0; /* На 70px снизу меньше так как снизу плашка от тильды */

        overflow-x: hidden;
    }


    /* Секция с инструкцией */
    #section-instruction {
        width: min(1440px, 100%); /* Ширина 1440px или 100% при сужении */
        height: auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 100px;
    }

    /* Заголовок страницы */
    #section-title {
        height: 57px;
        padding-top: 75px;
        padding-bottom: 80px;

        text-transform: uppercase;
        text-align: center;

        color: var(--h-title);
    }


    .section-instruction__row {
        width: 100%;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: stretch;
        gap: 25px;

        box-sizing: border-box;
        padding: 0 40px;
    }

    .section-instruction__row img {
        /* Особый случай (неправильная svg) */
        width: 177px;
        height: 177px;
    }

    .section-instruction__row-svg {
        display: flex;
        align-items: center;
    }


    .section-instruction__row-content {
        width: 363px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 30px;
    }

    .section-instruction__row-content > h3 {
        width: 100%;
        color: #141212;
        font-weight: 400;
        line-height: 132%;
    }

    .section-instruction__row-content > h3 span {
        font-weight: 700;
    }


    .section-instruction__row-order {
        width: 77px;
        height: 77px;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: var(--border);
        border-radius: 50%;
    }

    .section-instruction__row-order h3 {
        color: #FFFFFF;
    }


    /* Начать тестирование */
    #submit-instruction {
        width: 720px;
        height: 80px;

        border-radius: 20px;

        font-size: 32px !important;
        font-weight: 500;

        margin-top: 150px;
    }
</style>

<style>
    /* Контент страницы */
    .section-content__column {
        width: 729px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .question-wrappper {
        width: 100%;
        height: 119px;
        display: flex;
        align-items: center;
        justify-content: center;

        box-sizing: border-box;
        /* padding: 0 85px; */


        border-radius: 10px;
        border: 2px solid #BD92CE;
        background-color: #FFFFFF;

        margin-top: 5px;
    }

    #question {
        width: 559px;
        color: #141212;
        line-height: 112%;
    }


    .grade-wrapper {
        width: 100%;
        display: flex;
        justify-content: space-between;

        margin-top: 42px;
    }

    .grade-wrapper h3 {
        color: #000;
        font-size: 18px;
        font-weight: 400;
        line-height: 112%;
    }

    .grade-content {
        width: 54px;
        height: 134px;
        display: flex;
        flex-direction: column;

        position: relative;
    }

    .grade-content h3 {
        width: 85px;
        position: absolute;
        top: 74px;
        left: 0px;
    }

    .grade {
        width: 54px;
        height: 54px;
        background-color: rgba(241, 205, 33, 0.30);
        border-radius: 50%;

        display: flex;
        justify-content: center;
        align-items: center;

        color: #141212;
        cursor: pointer;
        transition: .15s all;
    }

    @media (hover: hover) {
        .grade:hover {
            background-color: rgba(241, 205, 33, 0.50);
        }
    }

    .grade.active {
        background-color: rgba(241, 205, 33, 0.50);
    }

    .grade-range {
        width: 100%;
        height: 2px;
        position: relative;

        background-color: var(--p-cian);

        margin-top: 40px;
    }

    .grade-circle {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: var(--p-cian);

        position: absolute;
        top: -4px;
        left: 0%;
    }


    .question-buttons {
        width: 517px;
        height: 46px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;

        margin-top: 61px;
    }

    #question-counter {
        font-size: 18px;
        color: #141212;
    }

    #button-back {
        width: 178px;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;

        background-color: #ffffff;
        border: 1px solid var(--button);
    }

    @media (hover: hover) {
        #button-back:hover {
            background-color: #000000;
            color: #FFFFFF !important;
            border: 1px solid #000000;
        }
    }

    #button-next, #button-end {
        width: 178px;
        height: 100%;

        position: absolute;
        top: 0;
        right: 0;
    }


    .section-instruction__row-svg-phone {
        display: none;
    }
</style>

<article>
    <div id="top-left-logo">
        <img src="https://static.tildacdn.com/tild6630-3237-4638-a534-313664333931/___.svg" alt="logo">
    </div>

    <!-- Фигура сверху справо -->
    <div id="top-right-figure" class="hidden">
        <svg xmlns="http://www.w3.org/2000/svg" width="203" height="166" viewBox="0 0 203 166" fill="none">
            <path d="M226.379 71.1897L226.379 71.1892C216.389 58.383 219.417 38.0788 232.703 29.9459C241.756 24.3971 245.156 13.7067 243.661 3.88713C242.167 -5.93533 235.835 -14.5648 225.766 -16.1794C210.733 -18.5911 201.967 -36.5881 207.547 -52.4696C211.451 -63.6028 208.046 -74.3253 201.527 -80.6613C195.029 -86.9762 185.497 -88.9122 176.867 -82.6374C170.481 -77.9928 163.026 -77.4429 156.598 -80.1535C150.182 -82.8594 144.843 -88.7864 142.555 -96.9987C139.374 -108.415 130.879 -113.992 122.495 -113.992C114.112 -113.992 105.617 -108.415 102.435 -96.9986C100.152 -88.7864 94.8158 -82.8594 88.3996 -80.1535C81.972 -77.4428 74.5146 -77.9929 68.1242 -82.6372L68.1238 -82.6375C59.4986 -88.9121 49.9662 -86.9764 43.4684 -80.6613C36.9491 -74.3253 33.5445 -63.603 37.4525 -52.4699L37.4526 -52.4698C43.0242 -36.5887 34.2582 -18.5913 19.2345 -16.1795C9.16489 -14.5648 2.83337 -5.93533 1.33869 3.88713C-0.155547 13.7067 3.24442 24.3971 12.2971 29.9459C25.5828 38.0788 28.6114 58.3832 18.6118 71.1896C11.6917 80.054 11.6889 91.4816 15.9747 100.081C20.2585 108.676 28.6961 114.245 38.6053 111.777L38.6056 111.777C53.5231 108.065 67.1004 121.622 66.5572 138.744L66.5572 138.744C66.1707 150.769 72.5359 159.439 80.4623 162.78C88.3555 166.106 97.9187 164.209 104.232 154.803L104.232 154.803C108.828 147.96 115.637 144.486 122.495 144.486C129.354 144.486 136.163 147.96 140.758 154.803L140.759 154.803C147.072 164.209 156.635 166.106 164.528 162.78C172.455 159.439 178.82 150.769 178.434 138.744L178.434 138.744C177.89 121.621 191.477 108.066 206.394 111.777L206.395 111.777C216.299 114.245 224.737 108.676 229.021 100.081C233.306 91.4816 233.304 80.0541 226.379 71.1897Z" stroke="#66CAA6" stroke-width="2"/>
        </svg>
    </div>

    <!-- Треугольник по центру слево -->
    <div id="center-left-figure" class="hidden">
        <svg xmlns="http://www.w3.org/2000/svg" width="208" height="318" viewBox="0 0 208 318" fill="none">
            <path d="M197.5 142.751C210.167 150.064 210.167 168.346 197.5 175.66L-42.5 314.224C-55.1667 321.537 -71 312.395 -71 297.769V20.641C-71 6.01481 -55.1667 -3.12657 -42.5 4.18653L197.5 142.751Z" stroke="#F1CD21" stroke-width="2"/>
        </svg>
    </div>

    
    <aside id="form-aside">
        <h3>После заполнения анкеты вам откроется доступ к диагностике<br><span>«Исследование ценностей»</span></h3>
        <p>Диагностика поможет узнать, какие виды деятельности вам подходят больше всего.<br>Пожалуйста, внимательно прочитайте инструкцию, прежде чем переходить к самой диагностике. Инструкция будет доступна вам после заполнения данной формы.</p>
    </aside>

    <section id="form-section">
        <form>
            <div id="form-logo">
                <img src="https://sun9-33.userapi.com/impg/o7UasFLuPHffAw7M354dhIyAw-ywr1TdpgWp7w/AU35d9CQutY.jpg?size=192x140&quality=96&sign=65f29d920ee520f801e55492621ceaed&type=album" alt="mini-logo">
            </div>

            <label class="p1" for="form-name">ФИО</label>
            <input class="p1" type="text" id="form-name" name="form-name" maxlength="100" required>

            <label class="p1" for="form-phone">Телефон</label>
            <input class="p1" type="tel" id="form-phone" name="form-phone" maxlength="20" required>

            <label class="p1" for="form-email">Email</label>
            <input class="p1" type="email" id="form-email" name="form-email" maxlength="100" required>

            <p id="form-error">Неверный формат ФИО</p>

            <div class="form-checkbox">
                <div id="policy"></div>
                <label id="label-policy" for="policy" class="p1">Я принимаю условия <span>Пользовательского соглашения</span> и даю свое <span>согласие на обработку персональных данных</span> в соответствии с <span>Политикой</span>.</label>
            </div>
            

            <button class="p1" type="submit" id="submit-form">Далее</button>
        </form>
    </section>


    <!-- Контент диагностики -->
    <h2 id="section-title" class="hidden">«Исследование ценностей»</h2>

    <!-- Инструкция -->
    <section id="section-instruction" class="hidden">
        <div class="section-instruction__row">
            <div class="section-instruction__row-svg">
                <svg xmlns="http://www.w3.org/2000/svg" width="177" height="177" viewBox="0 0 177 177" fill="none">
                    <path d="M165.152 105.296L165.612 106.184L165.152 105.296C172.422 101.533 176 94.9908 176 88.4971C176 82.0034 172.422 75.4617 165.152 71.6984L165.612 70.8103L165.152 71.6984L33.7106 3.65459C26.4271 -0.115524 18.2279 0.353638 11.8505 3.65456C5.47496 6.9545 1 13.0328 1 20.4564V156.544C1 163.964 5.47487 170.043 11.8506 173.344C18.2281 176.646 26.4272 177.116 33.7107 173.346L165.152 105.296Z" stroke="#66CAA6" stroke-width="2"/>
                </svg>
            </div>
            <div class="section-instruction__row-content">
                <div class="section-instruction__row-order"><h3>1</h3></div>
                <h3>Этот тест поможет нам исследовать важные для вас жизненные цели и ценности.
                    <div class="section-instruction__row-svg-phone svg-phone1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="84" height="137" viewBox="0 0 84 137" fill="none">
                            <path d="M91.9461 16.2437L91.9464 16.2435C96.218 13.3141 100.927 14.2107 104.153 17.1667C107.391 20.1342 109.082 25.15 107.139 30.3719L91.9461 16.2437ZM91.9461 16.2437C84.9944 21.0081 75.8971 17.2807 73.4372 8.94678C71.8574 3.59785 67.6538 1 63.5 1C59.3463 1 55.1427 3.59781 53.5629 8.94662C51.103 17.2806 42.0056 21.0082 35.0539 16.2437L35.0537 16.2436C30.7811 13.314 26.0725 14.2108 22.8477 17.1667C19.6102 20.1341 17.9203 25.1501 19.8629 30.3724C22.8623 38.4235 18.1545 47.5752 10.039 48.8032L10.0389 48.8032C5.05718 49.5565 1.91435 53.5741 1.16886 58.1909C0.42323 62.8087 2.11866 67.8008 6.60432 70.3927C13.7715 74.5293 15.3906 84.838 10.0136 91.3373L10.0132 91.3377C6.57639 95.4878 6.56931 100.835 8.70366 104.873C10.8347 108.905 15.0086 111.491 19.9103 110.339L19.9106 110.339C27.965 108.449 35.2787 115.355 34.984 124.038C34.7928 129.68 37.9505 133.728 41.8791 135.289C45.792 136.844 50.5169 135.959 53.649 131.561L53.6491 131.561C58.632 124.566 68.3699 124.566 73.3524 131.561L73.3525 131.561C76.4839 135.959 81.2088 136.844 85.1218 135.289C89.0505 133.728 92.2081 129.68 92.016 124.038L92.016 124.038C91.7234 115.355 99.0348 108.449 107.089 110.339L107.09 110.339C111.991 111.491 116.165 108.905 118.296 104.873C120.431 100.835 120.424 95.4878 116.987 91.3377L116.986 91.3373C111.609 84.8379 113.23 74.5292 120.396 70.3927C124.881 67.8008 126.577 62.8087 125.831 58.1909C125.086 53.5741 121.943 49.5565 116.961 48.8032L116.961 48.8032M91.9461 16.2437L116.961 48.8032M116.961 48.8032C108.845 47.5751 104.14 38.4233 107.139 30.3724L116.961 48.8032Z" stroke="#BE92CF" stroke-width="2"/>
                        </svg>
                    </div>
                </h3>
            </div>
            <div class="section-instruction__row-svg">
                <svg xmlns="http://www.w3.org/2000/svg" width="177" height="177" viewBox="0 0 177 177" fill="none">
                    <path d="M155.834 1H21.1671C10.0287 1 1 10.0305 1 21.1689V155.831C1 166.969 10.0287 176 21.1671 176H155.834C166.972 176 176 166.97 176 155.831V21.1689C176 10.0305 166.972 1 155.834 1Z" stroke="#F1CD21" stroke-width="2"/>
                </svg>
            </div>
            <div class="section-instruction__row-content">
                <div class="section-instruction__row-order"><h3>2</h3></div>
                <h3>Чтобы выбрать вам профессию и карьеру в соотвествии с тем, что для вас наиболее важно и ценно в жизни.
                    <div class="section-instruction__row-svg-phone svg-phone2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="86" height="121" viewBox="0 0 86 121" fill="none">
                            <path d="M79.2768 71.7515L79.2769 71.7515C83.0623 69.2817 85 64.9259 85 60.498C85 56.0702 83.0623 51.7143 79.2769 49.2446L79.8233 48.407L79.2768 49.2445L7.98662 2.72874C4.22671 0.275711 0.0229292 0.576874 -3.27553 2.72874C-6.58668 4.88887 -9 8.93503 -9 13.9843V107.016C-9 112.063 -6.58676 116.109 -3.27543 118.27C0.0231752 120.423 4.2269 120.725 7.98666 118.272L79.2768 71.7515Z" stroke="#66CAA6" stroke-width="2"/>
                        </svg>
                    </div>
                </h3>
            </div>
            <div class="section-instruction__row-svg">
                <svg xmlns="http://www.w3.org/2000/svg" width="177" height="177" viewBox="0 0 177 177" fill="none">
                    <path d="M88.5001 1C40.1805 1 1 40.174 1 88.5C1 136.819 40.1806 176 88.5001 176C136.826 176 176 136.82 176 88.5C176 40.1739 136.826 1 88.5001 1Z" stroke="#BD92CE" stroke-width="2"/>
                </svg>
            </div>
        </div>

        <div class="section-instruction__row">
            <div class="section-instruction__row-svg">
                <img src="https://sun9-32.userapi.com/impg/aDnh_NZEyziTALzNAAoRZrVIo68FYRSkLF70Nw/5nzEQZv9lEk.jpg?size=177x177&quality=96&sign=d52c9edac1ccf1fd77e2a4231da6e2df&type=album" alt="shape">
            </div>
            <div class="section-instruction__row-content">
                <div class="section-instruction__row-order"><h3>3</h3></div>
                <h3>Прохождение теста займет у вас 8-10 минут.
                    <div class="section-instruction__row-svg-phone svg-phone3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="111" viewBox="0 0 70 111" fill="none">
                            <path d="M87.1612 1H11.8392C5.95722 1 1 6.38558 1 13.2754V97.7246C1 104.614 5.95722 110 11.8392 110H87.1612C93.0432 110 98 104.614 98 97.7246V13.2754C98 6.38554 93.0432 1 87.1612 1Z" stroke="#F1CD21" stroke-width="2"/>
                        </svg>
                    </div>
                </h3>
            </div>
            <div class="section-instruction__row-svg">
                <svg xmlns="http://www.w3.org/2000/svg" width="177" height="177" viewBox="0 0 177 177" fill="none">
                    <path d="M62.3216 1C62.4732 20.4091 67.0339 38.7251 74.9553 54.9357L75.6584 56.3747H74.0568H1V120.618H74.0568H75.6581L74.9553 122.057C67.0339 138.275 62.4731 156.584 62.3216 176H123.332C123.836 145.765 147.136 121.184 176 120.628V56.3651C147.136 55.8091 123.836 31.2349 123.332 1H62.3216Z" stroke="#66CAA6" stroke-width="2"/>
                </svg>
            </div>
            <div class="section-instruction__row-content">
                <div class="section-instruction__row-order"><h3>4</h3></div>
                <h3>При ответе на каждый вопрос вам нужно будет выбрать один <span>из 5 вариантов ответов.</span>
                    <div class="section-instruction__row-svg-phone svg-phone4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="76" height="136" viewBox="0 0 76 136" fill="none">
                            <path d="M15.5 1C-17.2506 1 -44 30.883 -44 68C-44 105.112 -17.2505 135 15.5 135C48.2551 135 75 105.112 75 68C75 30.883 48.2551 1 15.5 1Z" stroke="#BD92CE" stroke-width="2"/>
                        </svg>
                    </div>
                </h3>
            </div>
            <div class="section-instruction__row-svg">
                <svg xmlns="http://www.w3.org/2000/svg" width="177" height="177" viewBox="0 0 177 177" fill="none">
                    <path d="M132.987 44.6374L132.528 44.4786L132.369 44.019C123.375 18.0002 106.936 1 88.5031 1C70.0697 1 53.6254 18.0004 44.6375 44.0188L44.4787 44.4786L44.0188 44.6374C18.0005 53.6254 1 70.0697 1 88.5031C1 106.936 18.0003 123.374 44.0188 132.362L44.4787 132.521L44.6375 132.981C53.6254 158.999 70.0697 176 88.5031 176C106.936 176 123.375 158.999 132.369 132.981L132.528 132.521L132.987 132.362C159 123.374 176 106.936 176 88.5031C176 70.0696 158.999 53.6253 132.987 44.6374Z" stroke="#F1CD21" stroke-width="2"/>
                </svg>
            </div>
        </div>

        <div class="section-instruction__row">
            <div class="section-instruction__row-svg">
                <svg xmlns="http://www.w3.org/2000/svg" width="177" height="177" viewBox="0 0 177 177" fill="none">
                    <path d="M165.152 105.296L165.612 106.184L165.152 105.296C172.422 101.533 176 94.9908 176 88.4971C176 82.0034 172.422 75.4617 165.152 71.6984L165.612 70.8103L165.152 71.6984L33.7106 3.65459C26.4271 -0.115524 18.2279 0.353638 11.8505 3.65456C5.47496 6.9545 1 13.0328 1 20.4564V156.544C1 163.964 5.47487 170.043 11.8506 173.344C18.2281 176.646 26.4272 177.116 33.7107 173.346L165.152 105.296Z" stroke="#66CAA6" stroke-width="2"/>
                </svg>
            </div>
            <div class="section-instruction__row-content">
                <div class="section-instruction__row-order"><h3>5</h3></div>
                <h3>Выполняйте его внимательно и вдумчиво, «примеряя на себя» каждый вопрос.
                    <div class="section-instruction__row-svg-phone svg-phone5">
                        <svg xmlns="http://www.w3.org/2000/svg" width="75" height="135" viewBox="0 0 75 135" fill="none">
                            <path d="M93.7986 34.2615L93.3438 34.0918L93.1959 33.6294C90.0365 23.759 85.5589 15.5701 80.2572 9.86692C74.9583 4.16678 68.8901 1 62.5022 1C56.1142 1 50.045 4.16682 44.7455 9.86696C39.4433 15.5701 34.9657 23.759 31.8086 33.6292L31.6607 34.0918L31.2057 34.2615C12.9068 41.0885 1 53.5557 1 67.5023C1 81.4488 12.9066 93.9112 31.2057 100.738L31.6607 100.908L31.8086 101.371C34.9657 111.241 39.4433 119.43 44.7455 125.133C50.045 130.833 56.1142 134 62.5022 134C68.8901 134 74.9583 130.833 80.2572 125.133C85.5589 119.43 90.0365 111.241 93.1959 101.37L93.3438 100.908L93.7986 100.738C112.093 93.9113 124 81.4489 124 67.5023C124 53.5557 112.093 41.0884 93.7986 34.2615Z" stroke="#F1CD21" stroke-width="2"/>
                        </svg>
                    </div>
                </h3>
            </div>
            <div class="section-instruction__row-svg">
                <svg xmlns="http://www.w3.org/2000/svg" width="177" height="177" viewBox="0 0 177 177" fill="none">
                    <path d="M155.834 1H21.1671C10.0287 1 1 10.0305 1 21.1689V155.831C1 166.969 10.0287 176 21.1671 176H155.834C166.972 176 176 166.97 176 155.831V21.1689C176 10.0305 166.972 1 155.834 1Z" stroke="#F1CD21" stroke-width="2"/>
                </svg>
            </div>
            <div class="section-instruction__row-content">
                <div class="section-instruction__row-order"><h3>6</h3></div>
                <h3>Пожалуйста, выполните это задание <span>до 21:00</span> завтрашнего дня!
                    <div class="section-instruction__row-svg-phone svg-phone6">
                        <svg xmlns="http://www.w3.org/2000/svg" width="105" height="119" viewBox="0 0 105 119" fill="none">
                            <path d="M30.8448 1C30.99 13.882 33.9363 26.0364 39.0202 36.8023L39.6941 38.2293H38.116H-9V80.7658H38.116H39.6938L39.0203 82.1927C33.9362 92.9634 30.9899 105.114 30.8448 118H69.7874C70.2685 97.8124 85.2729 81.3487 104 80.781V38.2142C85.2731 37.6466 70.2686 21.1876 69.7874 1H30.8448Z" stroke="#66CAA6" stroke-width="2"/>
                        </svg>
                    </div>
                </h3>
            </div>
            <div class="section-instruction__row-svg">
                <svg xmlns="http://www.w3.org/2000/svg" width="177" height="177" viewBox="0 0 177 177" fill="none">
                    <path d="M88.5001 1C40.1805 1 1 40.174 1 88.5C1 136.819 40.1806 176 88.5001 176C136.826 176 176 136.82 176 88.5C176 40.1739 136.826 1 88.5001 1Z" stroke="#BD92CE" stroke-width="2"/>
                </svg>
            </div>
        </div>

        <button id="submit-instruction">Начать тестирование</button>
    </section>

    <!-- Контент -->
    <section id="section-content" class="hidden">

        <div class="section-content__column">
            <div class="question-wrappper">
                <p id="question"></p>
            </div>

            <div class="grade-wrapper">
                <div class="grade-content">
                    <div class="grade" id="grade-1">
                        <p>1</p>
                    </div>
                    <h3>Не имеет никакого значения</h3>
                </div>
                
                <div class="grade-content">
                    <div class="grade" id="grade-2">
                        <p>2</p>
                    </div>
                    <h3>Имеет небольшое значение</h3>
                </div>

                <div class="grade-content">
                    <div class="grade" id="grade-3">
                        <p>3</p>
                    </div>
                    <h3>Имеет определенное значение</h3>
                </div>

                <div class="grade-content">
                    <div class="grade" id="grade-4">
                        <p>4</p>
                    </div>
                    <h3>Важно</h3>
                </div>

                <div class="grade-content">
                    <div class="grade" id="grade-5">
                        <p>5</p>
                    </div>
                    <h3>Очень важно</h3>
                </div>
            </div>

            <div class="grade-range">
                <div class="grade-circle"></div>
            </div>

            <div class="question-buttons">
                <button id="button-back">Назад</button>
                <p id="question-counter">1/41</p>
                <button id="button-next">Далее</button>
                <button class="hidden" id="button-end" disabled>Завершить</button>
            </div>
        </div>
    </section>
</article>

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
    // Пометить инпут ошибкой
    function inputError(selector) {
        // Если у инпута нету класса ошибки - добавляем и через 2 секунды удаляем
        if (!$(selector).hasClass("error")) {
            $(selector).addClass("error")
            setTimeout(() => {$(selector).removeClass("error")}, 2000)
        }
    }


    // Если пользователь валидно заполнил форму и данные сохранились в хэш, то заполняем поля
    let hashUserFormData = JSON.parse(localStorage.getItem("userFormData"))
    if (hashUserFormData) {
        $("#form-name").val(hashUserFormData.formName)
        $("#form-phone").val(hashUserFormData.formPhone)
        $("#form-email").val(hashUserFormData.formEmail)
        // Активируем галочку
        $("#policy").toggleClass("checked")
    }


    $("#form-name").change(() => { // Удаление лишних пробелов
        $("#form-name").val($("#form-name").val().replace(/ +/g, ' ').trim())
    })

    $("#form-phone").change(() => { // Удаление пробелов
        $("#form-phone").val($("#form-phone").val().replace(/ /g,''))
    })

    $("#form-email").change(() => { // Удаление пробелов
        $("#form-email").val($("#form-email").val().replace(/ /g,''))
    })


    // Галочка 
    $("#policy").on("click tap", () => {
        $("#policy").toggleClass("checked")
    })

    // Клик тексту после галочки
    $("#label-policy").on("click tap", () => {
        $("#policy").addClass("checked")
    })

    // Клик по политике
    $("#label-policy span").on("click tap", () => {
        window.open("../policy", "_blank")
    })


    // Ивент submit у формы входа
    const form = document.querySelector('form')
    form.addEventListener('submit', (event) => {
        // Отключение базового перехода
        event.preventDefault()

        // Отключаем кнопку на 2 секунды
        $("#submit-form").attr("disabled", "disabled")
        setTimeout(() => {
            $("#submit-form").removeAttr("disabled")
        }, 2000)


        // Получаем поля из фомы
        const formData = new FormData(form)
        const formName = formData.get("form-name")
        const formPhone = formData.get("form-phone")
        const formEmail = formData.get("form-email")
        
        // В поле ФИО должно быть ровно 3 слова
        if (formName.split(" ").length !== 3) {
            inputError("#form-name")

            // Ставим текст ошибки
            $("#form-error").text("Неверный формат ФИО")
            $("#form-error").addClass("show")
            setTimeout(() => {
                $("#form-error").removeClass("show")
            }, 2000)
            return
        }

        // Проверка поля Телефона на регулрном выражении
        let rePhone = /^[\d\+][\d\(\)\ -]{9,14}\d$/
        if (!rePhone.test(formPhone)) {
            inputError("#form-phone")
            // Ставим текст ошибки
            $("#form-error").text("Неверный номер телефона")
            $("#form-error").addClass("show")
            setTimeout(() => {
                $("#form-error").removeClass("show")
            }, 2000)
            return
        }

        // Проверка поля Почты на регулрном выражении
        let reEmail = /^[\w-\.]+@[\w-]+\.[a-z]{2,4}$/i
        if (!reEmail.test(formEmail)) {
            inputError("#form-email")
            // Ставим текст ошибки
            $("#form-error").text("Неверный email")
            $("#form-error").addClass("show")
            setTimeout(() => {
                $("#form-error").removeClass("show")
            }, 2000)
            return
        }

        if (!$("#policy").hasClass("checked")) {
            // Ставим текст ошибки
            $("#form-error").text("Отметьте поле")
            $("#form-error").addClass("show")
            setTimeout(() => {
                $("#form-error").removeClass("show")
            }, 2000)
            return
        }


        $("#form-aside").addClass("hidden")
        $("#form-section").addClass("hidden")
        $("#section-title").removeClass("hidden")
        $("#section-instruction").removeClass("hidden")

        // Класс для корректного отображения
        $("article").addClass("article-content")



        // Сохраняем информацию в хэш
        let userFormData = {
            formName: formName,
            formPhone: formPhone,
            formEmail: formEmail,
        }

        localStorage.setItem("userFormData", JSON.stringify(userFormData))

        // Когда заполнили все поля и нажали "Далее", то рендерит Правила
    })
</script>

<script>
    let questionCounter = 0

    function renderQuestion() {
        // Если counter равен нулю - рендерим форму входа
        if (questionCounter === 0) {
            $("#form-aside").removeClass("hidden")
            $("#form-section").removeClass("hidden")
            $("#section-title").addClass("hidden")
            $("#section-instruction").addClass("hidden")
            $("#section-content").addClass("hidden")

            $("#top-right-figure").addClass("hidden")
            $("#center-left-figure").addClass("hidden")

            // Класс для корректного отображения
            $("article").removeClass("article-content")
            return
        }


        if (questionCounter === questions.length - 1) {
            // Если counter равен последнему вопросу - рендерим кнопку завершения
            $("#button-next").addClass("hidden")
            $("#button-end").removeClass("hidden")
        } else {
            $("#button-next").removeClass("hidden")
            $("#button-end").addClass("hidden")
        }


        $("#question").text(questions[questionCounter].title);
        $("#question-counter").text(`${questionCounter}/${questions.length - 1}`);
        $("#button-next").attr("disabled", "disabled")
        $("#button-end").attr("disabled", "disabled")

        $(".grade.active").removeClass("active")
        $(".grade-circle").css("left", "0%")


        // Если ответ есть - активируем нужную оценку
        if (questions[questionCounter].weight !== 0) {
            $("#button-next").removeAttr("disabled")
            $("#button-end").removeAttr("disabled")
            $("#grade-" + questions[questionCounter].weight).addClass("active")

            // Перемещение значения на полосе
            switch (questions[questionCounter].weight) {
                case 1:
                    $(".grade-circle").css("left", "0%")
                    break;
                
                case 2:
                    $(".grade-circle").css("left", "25%")
                    break;

                case 3:
                    $(".grade-circle").css("left", "50%")
                    break;

                case 4:
                    $(".grade-circle").css("left", "75%")
                    break;
                
                case 5:
                    $(".grade-circle").css("left", "100%")
                    break;
            
                default:
                    break;
            }
        }
    }


    // Начать тестирование
    $("#submit-instruction").on("click tap", () => {
        // Отключаем инструкцию, оставляя заголовок и фигуру сверху справо
        $("#section-instruction").addClass("hidden")
        $("#bottom-left-figure").addClass("hidden")
        $("#section-content").removeClass("hidden")

        $("#top-right-figure").removeClass("hidden")
        $("#center-left-figure").removeClass("hidden")

        // Ренерим первый вопрос
        questionCounter = 1
        renderQuestion()
    })


    // Кнопка назад
    $("#button-back").on("click tap", () => {
        questionCounter--
        renderQuestion()
    })


    // Кнопка вперед
    $("#button-next").on("click tap", () => {
        questionCounter++
        renderQuestion()
    })


    // Нажатие по оценке
    $(".grade").on("click tap", (event) => {
        $(".grade.active").removeClass("active")
        $("#" + event.currentTarget.id).addClass("active")

        let grade = parseInt(event.currentTarget.id.split("-")[1])
        questions[questionCounter].weight = grade

        // Включаем кнопку
        $("#button-next").removeAttr("disabled")
        $("#button-end").removeAttr("disabled")


        // Перемещение значения на полосе
        switch (grade) {
            case 1:
                $(".grade-circle").css("left", "0%")
                break;
            
            case 2:
                $(".grade-circle").css("left", "25%")
                break;

            case 3:
                $(".grade-circle").css("left", "50%")
                break;

            case 4:
                $(".grade-circle").css("left", "75%")
                break;
            
            case 5:
                $(".grade-circle").css("left", "100%")
                break;
        
            default:
                break;
        }

        // Сохраняем оценку
        localStorage.setItem("questionsHash_exploringValues", JSON.stringify(questions))
    })
    


    // Если отеты сохранены - переносим на последний ответивший вопрос +1
    if (isQuestionsHash) {
        for (element of questions) {
            if (element.weight !== 0) {
                questionCounter = element.id + 1 // Записываем в текущий вопрос следущий вопрос после последнего ответа
            }
        }

        if (questionCounter === questions.length) {
            questionCounter = questions.length - 1
        }

        // Включаем контейнер вопросов
        $("#form-aside").addClass("hidden")
        $("#form-section").addClass("hidden")
        $("#section-title").removeClass("hidden")
        $("#section-content").removeClass("hidden")

        $("#top-right-figure").removeClass("hidden")
        $("#center-left-figure").removeClass("hidden")

        // Класс для корректного отображения
        $("article").addClass("article-content")

        renderQuestion()
    }


    // Отправка ответов
    $("#button-end").on("click tap", () => {
        $("#button-end").attr("disabled", "disabled")
        setTimeout(() => {
            $("#button-end").removeAttr("disabled")
        }, 5000)


        // Создаем массив содержащий все ответы
        let answ = {}
        for (let i = 1; i < questions.length; i++) {
            answ[i] = {
                weight: questions[i].weight,
            }
        }


        // Собираем вес средних результатов
        let ownPrestige = answ[5].weight + answ[6].weight + answ[7].weight + answ[21].weight + answ[27].weight + answ[49].weight + answ[57].weight + answ[65].weight + answ[73].weight + answ[74].weight
        let financialPosition = answ[8].weight + answ[11].weight + answ[20].weight + answ[30].weight + answ[36].weight + answ[45].weight + answ[58].weight + answ[59].weight + answ[63].weight + answ[66].weight
        let creativity = answ[2].weight + answ[9].weight + answ[25].weight + answ[31].weight + answ[37].weight + answ[48].weight + answ[53].weight + answ[55].weight + answ[72].weight + answ[79].weight
        let socialContacts = answ[15].weight + answ[16].weight + answ[22].weight + answ[28].weight + answ[34].weight + answ[42].weight + answ[47].weight + answ[54].weight + answ[60].weight + answ[64].weight
        let selfDevelopment = answ[17].weight + answ[23].weight + answ[35].weight + answ[38].weight + answ[41].weight + answ[44].weight + answ[56].weight + answ[69].weight + answ[70].weight + answ[80].weight
        let achievements =  answ[1].weight + answ[10].weight + answ[13].weight + answ[24].weight + answ[32].weight + answ[46].weight + answ[50].weight + answ[52].weight + answ[68].weight + answ[76].weight
        let spiritualSatisfaction = answ[3].weight + answ[4].weight + answ[18].weight + answ[33].weight + answ[39].weight + answ[40].weight + answ[43].weight + answ[62].weight + answ[71].weight + answ[78].weight
        let ownIndividuality = answ[12].weight + answ[14].weight + answ[19].weight + answ[26].weight + answ[29].weight + answ[51].weight + answ[61].weight + answ[67].weight + answ[75].weight + answ[77].weight

        let allWeights = {
            ownPrestige: ownPrestige,
            financialPosition: financialPosition,
            creativity: creativity,
            socialContacts: socialContacts,
            selfDevelopment: selfDevelopment,
            achievements: achievements,
            spiritualSatisfaction: spiritualSatisfaction,
            ownIndividuality: ownIndividuality
        }

        // Получаем информацию о пользователе
        let userFormData = JSON.parse(localStorage.getItem("userFormData"))
        
        // Массив который отправиться
        let sendData = {
        // id: Установиться в google scripts
            "manager_id": parseInt(URLParams["manager-id"]),
            "name": userFormData.formName,
            "phone": userFormData.formPhone,
            "email": userFormData.formEmail,
            "new": true,
            "result": {
                "diagnostic-id": 13, // Для этой диагностики id = 13
                "data": allWeights,
                "date": Date.now() // Дата текущего прохождения
            },
            "in_archive": false,
            "date": Date.now() // Дата последней активности
        }

        
        // Api запрос в таблицу с результатами
        function DBsendResults(data, func) {
            $.ajax({
                url: "https://planb-service.ru/api/v1/client/result",
                method: "POST",
                data: JSON.stringify(data),
                success: func
            })
        }

        DBsendResults(sendData, (data) => {
            // Информация отправляется и перекидывает на конец тестирования

            // Добавляем значение в хэш что бы после перезагрузки перекинуло на концовку
            localStorage.setItem("test-end", "test-end")
            location.reload()
        })
    })
</script>